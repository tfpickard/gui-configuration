#!/usr/bin/env bash
# Gets client to current workspace

loc=$(dirname "$(realpath "${BASH_SOURCE:-0}")")

_current_workspace="$(hyprctl monitors -j | jq '.[] | select(.focused==true)' | jq -j '.activeWorkspace.name')"

[ -f "$loc/../get-client" ] || exit
hash rofi 2>/dev/null || exit
hash hyprctl 2>/dev/null || exit

killall -q rofi && exit

out=$("$loc/../get-client" | awk '{print $3}')

[ -z "$out" ] || {
	hyprctl dispatch movetoworkspace "$_current_workspace,pid:$out"
	[ "$(hyprctl activewindow -j | jq '.floating')" = true ] && {
		hyprctl dispatch bringactivetotop none
	}
}

# vim: ft=sh
