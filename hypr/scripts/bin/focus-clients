#!/usr/bin/env bash
# Focuses to available open clients

loc=$(dirname "$(realpath "${BASH_SOURCE:-0}")")

[ -f "$loc/../list-client" ] || exit
hash rofi 2>/dev/null || exit
hash hyprctl 2>/dev/null || exit

killall -q rofi && exit

out=$("$loc/../get-client" | awk '{print $3}')
# out=$(rofi -show combi -modes combi -combi-modes "clients:$loc/../list-client,drun" | awk '{print $3}')
echo "$out"
[ -z "$out" ] || {
	hyprctl dispatch focuswindow "pid:$out"
	[ "$(hyprctl activewindow -j | jq '.floating')" = true ] && {
		echo working
		hyprctl dispatch bringactivetotop none
	}
}

# vim: ft=sh
